# SAS/C SMAKEFILE for BonAmi

# Compiler and flags
CC = sc
CFLAGS = OPTIMIZE OPTGO OPTINLINE OPTDEPTH=8 OPTVERBOSE OPTWARN=2
INCLUDES = -i=include

# Directories
SRC_DIR = src
OBJ_DIR = obj
BIN_DIR = bin

# Source files
SRCS = $(SRC_DIR)/bonamid.c
OBJS = $(SRC_DIR)/bonamid.o

# Default target
all: $(BIN_DIR)/bonamid

# Create binary directory
$(BIN_DIR):
    mkdir $(BIN_DIR)

# Link the daemon
$(BIN_DIR)/bonamid: $(OBJS) | $(BIN_DIR)
    $(CC) LINK $(OBJS) TO $@ LIBRARY lib:sc.lib lib:amiga.lib

# Compile source files
$(SRC_DIR)/%.o: $(SRC_DIR)/%.c
    $(CC) $(CFLAGS) $(INCLUDES) $<

# Clean target
clean:
    delete $(OBJS) $(BIN_DIR)/bonamid 